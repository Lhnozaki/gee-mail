<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
    // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
	  // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
				
	  // My Code //

	  let inboxBody = document.querySelector("#emails");

	  function generateEmails(n) {
		  for(i=0; i<n; i++) {
			  // Set UI Elements
			  let emailContainer = document.createElement('div');
			  let UIdate = document.createElement("div");
			  let UIsubject = document.createElement("div");
			  let UIsender = document.createElement("div");
			  let UIbody = document.createElement("div");
			  emailContainer.className = "content";
        
			  UIsubject.className = "subject";	
			  UIsubject.textContent = geemails[Math.floor(Math.random() * geemails.length)].subject;
			  emailContainer.appendChild(UIsubject);
			  UIsubject.style.display = "block";
					
			  UIdate.className = "date";
			  UIdate.textContent = `Date: ${geemails[Math.floor(Math.random() * geemails.length)].date}`;
			  UIsubject.appendChild(UIdate);
			  UIdate.style.display = "none";

			  UIsender.className = "sender";
			  UIsender.textContent = `From: ${geemails[Math.floor(Math.random() * geemails.length)].sender}`;
			  UIsubject.appendChild(UIsender);
			  UIsender.style.display = "none";

			  UIbody.className = "message";
			  UIbody.textContent = geemails[Math.floor(Math.random() * geemails.length)].body;
			  UIsubject.appendChild(UIbody);
			  UIbody.style.display = "none";

			  // Append to Inbox Body
			  //inboxBody.appendChild(emailContainer);
        let first = document.getElementById("emails");
				let second = document.getElementById("first-email");
				//first.insertBefore(emailContainer, second);
				first.prepend(emailContainer)
		}
	}		
	
  generateEmails(geemails.length);

  let num = 11;
	let inboxCount = document.querySelector("#count");
  let classDiv = document.getElementsByClassName("subject");
  for (i = 0; i<classDiv.length; i++){
    classDiv[i].addEventListener("click", showMsg);
  }

  function showMsg() {
    let showDate = this.querySelectorAll(".date")[0];
    let showSender = this.querySelectorAll(".sender")[0];
    let showMessage = this.querySelectorAll(".message")[0];
    if (showDate.style.display === "none"){
      showDate.style.display = "block";
      showSender.style.display = "block";
      showMessage.style.display = "block";
    } else {
      showDate.style.display = "none";
      showSender.style.display = "none";
      showMessage.style.display = "none";
    }
  }
			
	setInterval(function(){
	inboxCount.textContent = num++;
    
  generateEmails(1);

  let classDiv = document.getElementsByClassName("subject");
  for (i = 0; i<classDiv.length; i++){
    classDiv[0].style.fontWeight = "bold";
    classDiv[i].addEventListener("click", function (){
    let showDate = this.querySelectorAll(".date")[0];
    let showSender = this.querySelectorAll(".sender")[0];
    let showMessage = this.querySelectorAll(".message")[0];
    if (showDate.style.display === "none"){
      showDate.style.display = "block";
      showSender.style.display = "block";
      showMessage.style.display = "block";
      classDiv[0].style.fontWeight = "normal";
    } else {
      showDate.style.display = "none";
      showSender.style.display = "none";
      showMessage.style.display = "none";
    }
    })
  }
	}, 3000);

		// Search Bar
		let nav = document.querySelector("#search");
		nav.addEventListener('keyup', filterEmails);
		function filterEmails(e){
			const text = e.target.value.toLowerCase();

			document.querySelectorAll(".subject").forEach(function(email){
				const sub = email.firstChild.textContent;
				if (sub.toLowerCase().indexOf(text) !== -1){
					email.style.display = "block";
				} else {
					email.style.display = "none";
				}
			})			
		}
	};
		
		</script>
		<link rel="stylesheet" href="css/style.css">
		<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	</head>
	<body>
	<div class="container">
  		
		<!--Header-->
		<div class="header">
			<h1 id="logo">
					GeeMail
				</h1>
			<span id="log-out">Log Out</span>
		</div>

		<!--Search Bar-->
		<div class="searchBar">
			<input type="text" id="search" placeholder="Search..">
		</div>
	
		<!--Side Navigation-->
		<div class="menu">
			<a href="#" id="compose"><span id="plus">+</span> Compose</a>
			<a href="." id="inbox">Inbox (<span id="count">10</span>)</a>
			<a href="#">Sent</a>
			<a href="https://www.spam.com/">Spam</a>
			<a href="#">Deleted</a>
			<a href="#">Starred</a>
			<a href="#">Categories</a>
			<a href="#">Draft</a>
		</div>
		
		<!--Inbox of Messages-->
		<div id="emails">
			<!-- <div class="content"> -->
			<li id="first-email">Open this email, Young sir. 
					<p class="sender">Abraham Lincoln</p>
					<p class="date">October 31, 2019</p>
					<p class="message">Lorem ipsum dolor sit amet consectetur adipisicing elit. Amet beatae veniam consequuntur deserunt suscipit nisi quidem explicabo voluptates? Consectetur reiciendis fugit aspernatur, itaque ad facilis quae exercitationem. Obcaecati accusantium quia saepe nesciunt qui! Tempora numquam pariatur id voluptate tenetur praesentium! Ratione dolorum quae reiciendis sint alias voluptates maiores voluptatem ipsum.</p>	
			</li>
			<!-- </div> -->
		</div>

		<!--Clear Float-->
		<div class="clear"></div>

		<!--Footer-->
		<div class="footer">
			<p>Copyright &copy; DevLeague 2019</p>
		</div>

	</div>
	</body>
</html>